{# filepath: d:\prog\php\project\choven.by\templates\admin\failed_email_details.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Детали неудачного письма{% endblock %}

{% block head %}
    {% block stylesheets %}
        {{ parent() }}
        <style>
            <link rel="stylesheet" href="{{ asset('styles/dashboard.css') }}">
        </style>
    {% endblock %}
{% endblock %}

{% block body %}
    <section class="email-details">
        <div class="container">
            <h1 class="email-details-title">Детали неудачного письма #{{ email.id }}</h1>
            
            <div class="email-card">
                <h3>Основная информация</h3>
                
                <div class="info-row">
                    <div class="info-label">ID:</div>
                    <div class="info-value">{{ email.id }}</div>
                </div>
                
                <div class="info-row">
                    <div class="info-label">Тип письма:</div>
                    <div class="info-value">{{ email.emailType }}</div>
                </div>
                
                <div class="info-row">
                    <div class="info-label">Количество попыток:</div>
                    <div class="info-value">{{ email.attempts }}</div>
                </div>
                
                <div class="info-row">
                    <div class="info-label">Дата создания:</div>
                    <div class="info-value">{{ email.createdAt|date('d.m.Y H:i:s') }}</div>
                </div>
                
                <div class="info-row">
                    <div class="info-label">Последняя попытка:</div>
                    <div class="info-value">{{ email.lastAttemptAt|date('d.m.Y H:i:s') }}</div>
                </div>
                
                <div class="info-row">
                    <div class="info-label">Локаль:</div>
                    <div class="info-value">{{ email.locale|default('default') }}</div>
                </div>
            </div>
            
            {% if email.error %}
                <div class="email-card">
                    <h3>Сообщение об ошибке</h3>
                    <div class="error-message">
                        <pre>{{ email.error }}</pre>
                    </div>
                </div>
            {% endif %}
            
            <div class="email-card">
                <h3>Контекст письма</h3>
                <div class="context-data">
                    <pre>{{ email.context|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
                </div>
            </div>
            
            <a href="{{ path('app_admin_failed_emails') }}" class="back-link">&laquo; Вернуться к списку</a>
        </div>
    </section>
{% endblock %}