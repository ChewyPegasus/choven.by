{% extends 'base.html.twig' %}

{% block title %}{{ 'main.title'|trans }}{% endblock %}

{% block head %}
    {% block stylesheets %}
        {{ parent() }} 
        <!-- slider -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    
        <!-- styles -->
        <link rel="stylesheet" href="{{ asset('styles/slider.css') }}">
        <link rel="stylesheet" href="{{ asset('styles/cards.css') }}">
        <link rel="stylesheet" href="{{ asset('styles/popup.css') }}">
    {% endblock %}
{% endblock %}

{% block body %}
<div class="hero-section">
    <!-- Slider main container -->
    <div class="swiper hero-swiper">
        <!-- Additional required wrapper -->
        <div class="swiper-wrapper">
            <!-- Slides -->
            <div class="swiper-slide">
                <div class="slide-content">
                    <img src="{{ asset('images/slider/kayaks.png') }}" alt="Каяки" class="kayaks">
                    <div class="slide-text">
                        <h2>{{ 'main.slider.1st.title'|trans }}</h2>
                        <p>{{ 'main.slider.1st.text'|trans }}</p>
                        <a href="{{ path('app_info') }}" class="btn-primary">{{ 'main.slider.1st.button'|trans }}</a>
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slide-content">
                    <img src="{{ asset('images/slider/view.jpg') }}" alt="Маршруты" class="kayaks">
                    <div class="slide-text">
                        <h2>{{ 'main.slider.2nd.title'|trans }}</h2>
                        <p>{{ 'main.slider.2nd.text'|trans }}</p>
                        <a href="{{ path('app_about') }}" class="btn-primary">{{ 'main.slider.2nd.button'|trans }}</a>
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slide-content">
                    <img src="{{ asset('images/slider/campfire.jpg') }}" alt="Вайб" class="kayaks">
                    <div class="slide-text">
                        <h2>{{ 'main.slider.3rd.title'|trans }}</h2>
                        <p>{{ 'main.slider.3rd.text'|trans }}</p>
                        <a href="{{ path('app_order_new') }}" class="btn-primary">{{ 'main.slider.3rd.button'|trans }}</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation buttons -->
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        
        <!-- Pagination -->
        <div class="swiper-pagination"></div>
    </div>
</div>

<!-- Секция с плитками сплавов -->
<section class="tours-section">
    <div class="container">
        <h2 class="section-title">{{ 'main.grid.title'|trans }}</h2>
        
        <div class="tours-grid">
            <!-- Карточка сплава 1 -->
            <div class="tour-card">
                <div class="tour-image" style="background-image: url('{{ asset('images/cards/all-inclusive.jpeg') }}');">
                    <div class="price-badge">{{ 'main.grid.cards.1st.preposition'|trans }} 200 BYN</div>
                </div>
                <div class="tour-content">
                    <h3>{{ 'main.grid.cards.1st.title'|trans }}</h3>
                    <p>{{ 'main.grid.cards.1st.description'|trans }}</p>
                    <div class="card-actions">
                        <button class="btn-details" data-package="all_inclusive">{{ 'main.grid.cards.details'|trans }}</button>
                        <a href="{{ path('app_order_new', {
                            'type': 'all_inclusive',
                            'duration': 2,
                        }) }}" class="btn-secondary">{{ 'main.grid.cards.button'|trans }}</a>
                    </div>
                </div>
            </div>
            
            <!-- Карточка сплава 2 -->
            <div class="tour-card">
                <div class="tour-image" style="background-image: url('{{ asset('images/cards/isloch-2day.jpg') }}');">
                    <div class="price-badge">{{ 'main.grid.cards.2nd.preposition'|trans }} 150 BYN</div>
                </div>
                <div class="tour-content">
                    <h3>{{ 'main.grid.cards.2nd.title'|trans }}</h3>
                    <p>{{ 'main.grid.cards.2nd.description'|trans }}</p>
                    <div class="card-actions">
                        <button class="btn-details" data-package="minimum">{{ 'main.grid.cards.details'|trans }}</button>
                        <a href="{{ path('app_order_new', {
                            'river': 'isloch',
                            'duration': 2,
                        }) }}" class="btn-secondary">{{ 'main.grid.cards.button'|trans }}</a>
                    </div>
                </div>
            </div>
            
            <!-- Карточка сплава 3 -->
            <div class="tour-card">
                <div class="tour-image" style="background-image: url('{{ asset('images/cards/svisloch.jpeg') }}');">
                    <div class="price-badge">{{ 'main.grid.cards.3rd.preposition'|trans }} 70 BYN</div>
                </div>
                <div class="tour-content">
                    <h3>{{ 'main.grid.cards.3rd.title'|trans }}</h3>
                    <p>{{ 'main.grid.cards.3rd.description'|trans }}</p>
                    <div class="card-actions">
                        <button class="btn-details" data-package="minimum">{{ 'main.grid.cards.details'|trans }}</button>
                        <a href="{{ path('app_order_new', {
                            'river': 'svisloch',
                            'duration': 1,
                        }) }}" class="btn-secondary">{{ 'main.grid.cards.button'|trans }}</a>
                    </div>
                </div>
            </div>
        
            <!-- Карточка сплава 4 -->
            <div class="tour-card">
                <div class="tour-image" style="background-image: url('{{ asset('images/cards/isloch.jpg') }}');">
                    <div class="price-badge">{{ 'main.grid.cards.4th.preposition'|trans }} 250 BYN</div>
                </div>
                <div class="tour-content">
                    <h3>{{ 'main.grid.cards.4th.title'|trans }}</h3>
                    <p>{{ 'main.grid.cards.4th.description'|trans }}</p>
                    <a href="{{ path('app_order_new', {
                        'type': 'all_inclusive',
                    }) }}" class="btn-secondary">{{ 'main.grid.cards.button'|trans }}</a>
                </div>
            </div>
            
            <!-- Карточка сплава 5 -->
            <div class="tour-card">
                <div class="tour-image" style="background-image: url('{{ asset('images/cards/svisloch.jpg') }}');">
                    <div class="price-badge">{{ 'main.grid.cards.5th.preposition'|trans }} 60 BYN</div>
                </div>
                <div class="tour-content">
                    <h3>{{ 'main.grid.cards.5th.title'|trans }}</h3>
                    <p>{{ 'main.grid.cards.5th.description'|trans }}</p>
                    <div class="card-actions">
                        <button class="btn-details" data-package="rent_only">{{ 'main.grid.cards.details'|trans }}</button>
                        <a href="{{ path('app_order_new', {
                            'type': 'rent_only',
                        }) }}" class="btn-secondary">{{ 'main.grid.cards.button'|trans }}</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% include 'partials/popups/all_inclusive.html.twig' %}
{% include 'partials/popups/minimum.html.twig' %}
{% include 'partials/popups/rent_only.html.twig' %}

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const swiper = new Swiper('.hero-swiper', {
            // Optional parameters
            loop: true,
            effect: 'fade',
            fadeEffect: {
                crossFade: true
            },
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
            },
            
            // Navigation arrows
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            
            // Pagination
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
        });

        const detailButtons = document.querySelectorAll('.btn-details');
        const popups = document.querySelectorAll('.popup-overlay');
        const closeButtons = document.querySelectorAll('.popup-close');
        
        // Open popup when detail button is clicked
        detailButtons.forEach(button => {
            button.addEventListener('click', function() {
                const packageType = this.getAttribute('data-package');
                const popup = document.getElementById(`popup-${packageType}`);
                if (popup) {
                    popup.classList.add('active');
                    document.body.style.overflow = 'hidden'; // Prevent scrolling of background
                }
            });
        });
        
        // Close popup when close button is clicked
        closeButtons.forEach(button => {
            button.addEventListener('click', function() {
                const popup = this.closest('.popup-overlay');
                if (popup) {
                    popup.classList.remove('active');
                    document.body.style.overflow = ''; // Restore scrolling
                }
            });
        });
        
        // Close popup when clicking outside of content
        popups.forEach(popup => {
            popup.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });
        
        // Close popup with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                popups.forEach(popup => {
                    popup.classList.remove('active');
                });
                document.body.style.overflow = '';
            }
        });
    });
</script>
{% endblock %}